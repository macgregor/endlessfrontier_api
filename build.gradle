plugins {
    id "java"
}

apply from: 'https://raw.github.com/akhikhl/gradle-onejar/master/pluginScripts/gradle-onejar.plugin'

group 'com.macgregor'
version '0.0.1'
sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

ext {
    dropwizardVersion = '1.2.3'
    mainClass = 'com.macgregor.ef.RestJava'
}

dependencies {
    compile (
            "io.dropwizard:dropwizard-core:${dropwizardVersion}"
    )
    testCompile(
            'junit:junit:4.12',
            "io.dropwizard:dropwizard-testing:${dropwizardVersion}",
            "org.assertj:assertj-core:3.9.0"
    )

}

sourceSets {
    test {
        java.srcDirs = ['src/test/java']
    }
}

tasks.withType(Test) {
    testLogging {
        exceptionFormat "full"
        events "started", "skipped", "passed", "failed"
        showStandardStreams true
    }
}

task stage(dependsOn: ['build', 'clean']) {
    onejar
}
build.mustRunAfter clean